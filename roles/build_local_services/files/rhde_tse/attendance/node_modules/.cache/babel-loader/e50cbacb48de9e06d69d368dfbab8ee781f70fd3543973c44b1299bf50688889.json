{"ast":null,"code":"import { time } from '@motionone/utils';\nimport { defaults } from './defaults.es.js';\nimport { calcDampingRatio } from './utils.es.js';\nimport { hasReachedTarget } from '../utils/has-reached-target.es.js';\nimport { calcGeneratorVelocity } from '../utils/velocity.es.js';\nconst spring = function () {\n  let {\n    stiffness = defaults.stiffness,\n    damping = defaults.damping,\n    mass = defaults.mass,\n    from = 0,\n    to = 1,\n    velocity = 0.0,\n    restSpeed = 2,\n    restDistance = 0.5\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  velocity = velocity ? time.s(velocity) : 0.0;\n  const state = {\n    done: false,\n    hasReachedTarget: false,\n    current: from,\n    target: to\n  };\n  const initialDelta = to - from;\n  const undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n  const dampingRatio = calcDampingRatio(stiffness, damping, mass);\n  let resolveSpring;\n  if (dampingRatio < 1) {\n    const angularFreq = undampedAngularFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n    // Underdamped spring (bouncy)\n    resolveSpring = t => to - Math.exp(-dampingRatio * undampedAngularFreq * t) * ((-velocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq * Math.sin(angularFreq * t) + initialDelta * Math.cos(angularFreq * t));\n  } else {\n    // Critically damped spring\n    resolveSpring = t => {\n      return to - Math.exp(-undampedAngularFreq * t) * (initialDelta + (-velocity + undampedAngularFreq * initialDelta) * t);\n    };\n  }\n  return t => {\n    state.current = resolveSpring(t);\n    const currentVelocity = t === 0 ? velocity : calcGeneratorVelocity(resolveSpring, t, state.current);\n    const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n    const isBelowDisplacementThreshold = Math.abs(to - state.current) <= restDistance;\n    state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n    state.hasReachedTarget = hasReachedTarget(from, to, state.current);\n    return state;\n  };\n};\nexport { spring };","map":{"version":3,"names":["time","defaults","calcDampingRatio","hasReachedTarget","calcGeneratorVelocity","spring","stiffness","damping","mass","from","to","velocity","restSpeed","restDistance","arguments","length","undefined","s","state","done","current","target","initialDelta","undampedAngularFreq","Math","sqrt","dampingRatio","resolveSpring","angularFreq","t","exp","sin","cos","currentVelocity","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold"],"sources":["C:/work/Demo/device-edge-workshops/roles/build_local_services/files/rhde_tse/attendance/node_modules/@motionone/generators/dist/spring/index.es.js"],"sourcesContent":["import { time } from '@motionone/utils';\nimport { defaults } from './defaults.es.js';\nimport { calcDampingRatio } from './utils.es.js';\nimport { hasReachedTarget } from '../utils/has-reached-target.es.js';\nimport { calcGeneratorVelocity } from '../utils/velocity.es.js';\n\nconst spring = ({ stiffness = defaults.stiffness, damping = defaults.damping, mass = defaults.mass, from = 0, to = 1, velocity = 0.0, restSpeed = 2, restDistance = 0.5, } = {}) => {\n    velocity = velocity ? time.s(velocity) : 0.0;\n    const state = {\n        done: false,\n        hasReachedTarget: false,\n        current: from,\n        target: to,\n    };\n    const initialDelta = to - from;\n    const undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n    const dampingRatio = calcDampingRatio(stiffness, damping, mass);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n        const angularFreq = undampedAngularFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n        // Underdamped spring (bouncy)\n        resolveSpring = (t) => to -\n            Math.exp(-dampingRatio * undampedAngularFreq * t) *\n                (((-velocity + dampingRatio * undampedAngularFreq * initialDelta) /\n                    angularFreq) *\n                    Math.sin(angularFreq * t) +\n                    initialDelta * Math.cos(angularFreq * t));\n    }\n    else {\n        // Critically damped spring\n        resolveSpring = (t) => {\n            return (to -\n                Math.exp(-undampedAngularFreq * t) *\n                    (initialDelta + (-velocity + undampedAngularFreq * initialDelta) * t));\n        };\n    }\n    return (t) => {\n        state.current = resolveSpring(t);\n        const currentVelocity = t === 0\n            ? velocity\n            : calcGeneratorVelocity(resolveSpring, t, state.current);\n        const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n        const isBelowDisplacementThreshold = Math.abs(to - state.current) <= restDistance;\n        state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n        state.hasReachedTarget = hasReachedTarget(from, to, state.current);\n        return state;\n    };\n};\n\nexport { spring };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}